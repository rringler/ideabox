<%= form_for comment, url: idea_comments_path(params[:idea_id]),
                      method: :post do |f| %>
  <div class="row">
    <div class="col-sm-12">
      <div class="form-group">
        <%= f.hidden_field :idea_id, value: params[:idea_id] %>
        <%= f.hidden_field :parent_id, value: comment.parent_id %>
        <%= f.label :text, "Commenting as: #{link_to current_user.username,
                                                     current_user}".html_safe %>
        <%= f.text_area :text, columns: 1,
                               rows: 3,
                               autofocus: true,
                               class: "form-control" %>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-12">
      <button type="submit" class="btn btn-primary">Save</button>
      <% link_params = { idea_id:   params[:idea_id],
                         parent_id: params[:parent_id] } %>
      <%= link_to 'Cancel', new_idea_comment_path(link_params),
                           class: 'btn btn-default',
                           remote: true,
                           method: :get %>
    </div>
  </div>
<% end %>
